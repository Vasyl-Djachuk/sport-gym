{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst exercisesList = document.querySelector(`.exercises-list`);\nconst exercisesListPages = document.querySelector(`.exercises-list-pages`);\n\nlet currentPage = 1,\n  perPage = 8,\n  typeOfFilter = `Muscles`;\n\nconst filterButton = document.querySelectorAll(`.exercises-button`);\n[...filterButton].map((b, i) => {\n  if (i === 0) b.classList.add(`exercises-button-active`);\n  b.addEventListener(`click`, filterExercises);\n});\n// =-======================================================\nasync function searchImageOnServer(\n  getType,\n  filter,\n  currentPages,\n  perPages,\n  filterType,\n  keyWord\n) {\n  // =====================\n  let params = {\n    page: currentPages,\n    limit: perPages,\n  };\n  if (filterType) {\n    params[filter] = filterType;\n    params.keyword = keyWord;\n  } else {\n    params.filter = filter;\n  }\n  // ========================\n  let parameters = new URLSearchParams(params).toString();\n\n  try {\n    const response = await axios.get(\n      `https://energyflow.b.goit.study/api/${getType}?${parameters}`\n    );\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n// ================================================\n// try {\n//   const answer = searchImageOnServer(`Body parts`, 1, 8);\n//   console.log(answer);\n// } catch (error) {\n//   console.log(error);\n// }\nfilterExercises();\nfunction filterExercises(e) {\n  currentPage = 1;\n  if (e) {\n    const button = e.target;\n    if (button.classList.contains(`exercises-button-active`)) return;\n    typeOfFilter = button.dataset.name;\n    document\n      .querySelector(`.exercises-button-active`)\n      .classList.remove(`exercises-button-active`);\n    button.classList.add(`exercises-button-active`);\n  }\n  getExercisesFromServer();\n\n  async function getExercisesFromServer() {\n    const list = await searchImageOnServer(\n      `filters`,\n      typeOfFilter,\n      currentPage,\n      perPage\n    )\n      .then(response => response)\n      .catch(error => console.log(error));\n    renderExercises(list.results, list.totalPages);\n  }\n\n  function renderExercises(arrow, totalPages) {\n    let listCode = arrow.reduce(\n      (list, { filter, imgUrl, name: nameMusculs }) => {\n        return (list += `<li class=\"exercises-item\" data-type=\"${nameMusculs}\" style=\"background-image: linear-gradient(\n      0deg,\n      rgba(16, 16, 16, 0.7) 0%,\n      rgba(16, 16, 16, 0.7) 100%\n    ),url(${imgUrl}); \">\n          <p class=\"exercises-item-text\" data-type=\"${nameMusculs}\">${nameMusculs}</p>\n          <p class=\"exercises-item-text-second\" data-type=\"${nameMusculs}\">${filter}</p>\n        </li>`);\n      },\n      ``\n    );\n    exercisesList.innerHTML = listCode;\n    exercisesList.addEventListener(`click`, renderTypeOfTraining);\n\n    if (\n      !exercisesListPages.textContent ||\n      typeOfFilter !==\n        document.querySelector(`.exercises-pages-button`).dataset.type\n    )\n      addNumberOfPages();\n    //   ======================================\n    function addNumberOfPages() {\n      let numberOfPages = ``;\n      for (let i = 1; i < totalPages + 1; i++) {\n        numberOfPages += `<li>\n          <button class=\"exercises-pages-button\" data-number=\"${i}\" data-type=\"${typeOfFilter}\">${i}</button>\n        </li>`;\n      }\n      exercisesListPages.innerHTML = numberOfPages;\n      document\n        .querySelector(`.exercises-pages-button`)\n        .classList.add(`select-pages-ative`);\n      exercisesListPages.addEventListener(`click`, showsExercisesPages);\n    }\n    //   ========================================================================\n    function showsExercisesPages(e) {\n      if (currentPage == e.target.dataset.number) return;\n      const pageNumber = document.querySelector(`.select-pages-ative`);\n\n      pageNumber.classList.remove(`select-pages-ative`);\n      e.target.classList.add(`select-pages-ative`);\n      currentPage = e.target.dataset.number;\n      getExercisesFromServer();\n      // console.log(e.target.dataset.number);\n    }\n  }\n  function renderTypeOfTraining(e) {\n    exercisesList.removeEventListener(`click`, renderTypeOfTraining);\n    const filter = document.querySelector(`.exercises-button-active`).dataset\n      .name;\n    const filterType = e.target.dataset.type;\n    console.log(e.target.dataset.type);\n  }\n}\n\n// filter: 'Muscles';\n// imgUrl: 'https://ftp.goit.study/img/energy-flow/Calves.webp';\n// name: 'calves';\n"],"names":["exercisesList","exercisesListPages","currentPage","perPage","typeOfFilter","filterButton","b","i","filterExercises","searchImageOnServer","getType","filter","currentPages","perPages","filterType","keyWord","params","parameters","axios","error","e","button","getExercisesFromServer","list","response","renderExercises","arrow","totalPages","listCode","imgUrl","nameMusculs","renderTypeOfTraining","addNumberOfPages","numberOfPages","showsExercisesPages"],"mappings":"svBAEA,MAAMA,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAqB,SAAS,cAAc,uBAAuB,EAEzE,IAAIC,EAAc,EAChBC,EAAU,EACVC,EAAe,UAEjB,MAAMC,EAAe,SAAS,iBAAiB,mBAAmB,EAClE,CAAC,GAAGA,CAAY,EAAE,IAAI,CAACC,EAAGC,IAAM,CAC1BA,IAAM,GAAGD,EAAE,UAAU,IAAI,yBAAyB,EACtDA,EAAE,iBAAiB,QAASE,CAAe,CAC7C,CAAC,EAED,eAAeC,EACbC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA,CAEA,IAAIC,EAAS,CACX,KAAMJ,EACN,MAAOC,CACX,EACMC,GACFE,EAAOL,GAAUG,EACjBE,EAAO,QAAUD,GAEjBC,EAAO,OAASL,EAGlB,IAAIM,EAAa,IAAI,gBAAgBD,CAAM,EAAE,SAAQ,EAErD,GAAI,CAIF,OAHiB,MAAME,EAAM,IAC3B,uCAAuCR,KAAWO,GACxD,GACoB,IACjB,OAAQE,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CAQAX,IACA,SAASA,EAAgBY,EAAG,CAE1B,GADAlB,EAAc,EACVkB,EAAG,CACL,MAAMC,EAASD,EAAE,OACjB,GAAIC,EAAO,UAAU,SAAS,yBAAyB,EAAG,OAC1DjB,EAAeiB,EAAO,QAAQ,KAC9B,SACG,cAAc,0BAA0B,EACxC,UAAU,OAAO,yBAAyB,EAC7CA,EAAO,UAAU,IAAI,yBAAyB,CAC/C,CACDC,IAEA,eAAeA,GAAyB,CACtC,MAAMC,EAAO,MAAMd,EACjB,UACAL,EACAF,EACAC,CACD,EACE,KAAKqB,GAAYA,CAAQ,EACzB,MAAML,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACpCM,EAAgBF,EAAK,QAASA,EAAK,UAAU,CAC9C,CAED,SAASE,EAAgBC,EAAOC,EAAY,CAC1C,IAAIC,EAAWF,EAAM,OACnB,CAACH,EAAM,CAAE,OAAAZ,EAAQ,OAAAkB,EAAQ,KAAMC,CAAW,IAChCP,GAAQ,yCAAyCO;AAAA;AAAA;AAAA;AAAA,YAIrDD;AAAA,sDAC0CC,MAAgBA;AAAA,6DACTA,MAAgBnB;AAAA,eAGvE,EACN,EACIX,EAAc,UAAY4B,EAC1B5B,EAAc,iBAAiB,QAAS+B,CAAoB,GAG1D,CAAC9B,EAAmB,aACpBG,IACE,SAAS,cAAc,yBAAyB,EAAE,QAAQ,OAE5D4B,IAEF,SAASA,GAAmB,CAC1B,IAAIC,EAAgB,GACpB,QAAS1B,EAAI,EAAGA,EAAIoB,EAAa,EAAGpB,IAClC0B,GAAiB;AAAA,gEACuC1B,iBAAiBH,MAAiBG;AAAA,eAG5FN,EAAmB,UAAYgC,EAC/B,SACG,cAAc,yBAAyB,EACvC,UAAU,IAAI,oBAAoB,EACrChC,EAAmB,iBAAiB,QAASiC,CAAmB,CACjE,CAED,SAASA,EAAoBd,EAAG,CAC9B,GAAIlB,GAAekB,EAAE,OAAO,QAAQ,OAAQ,OACzB,SAAS,cAAc,qBAAqB,EAEpD,UAAU,OAAO,oBAAoB,EAChDA,EAAE,OAAO,UAAU,IAAI,oBAAoB,EAC3ClB,EAAckB,EAAE,OAAO,QAAQ,OAC/BE,GAED,CACF,CACD,SAASS,EAAqB,EAAG,CAC/B/B,EAAc,oBAAoB,QAAS+B,CAAoB,EAChD,SAAS,cAAc,0BAA0B,EAAE,QAC/D,KACgB,EAAE,OAAO,QAAQ,KACpC,QAAQ,IAAI,EAAE,OAAO,QAAQ,IAAI,CAClC,CACH"}